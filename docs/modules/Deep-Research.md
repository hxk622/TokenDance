# Deep Research æ¨¡å—æŠ€æœ¯æ–‡æ¡£

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0.0  
**æ›´æ–°æ—¥æœŸ**: 2026-01-17  
**æ¨¡å—è´Ÿè´£**: Agent æ·±åº¦ç ”ç©¶ç³»ç»Ÿ

---

## ğŸ“‹ æ¦‚è¿°

Deep Research æ˜¯ TokenDance çš„æ ¸å¿ƒæ™ºèƒ½ç ”ç©¶æ¨¡å—ï¼Œé€šè¿‡å¤šæºå¹¶å‘æœç´¢ã€æ™ºèƒ½å†…å®¹æå–ã€æ¸è¿›å¼æ‘˜è¦ç­‰æŠ€æœ¯ï¼Œå®ç°é«˜æ•ˆã€é«˜è´¨é‡çš„è‡ªåŠ¨åŒ–æ·±åº¦ç ”ç©¶ã€‚

**æ ¸å¿ƒå®šä½**ï¼šä¸æ˜¯ç®€å•çš„æœç´¢èšåˆï¼Œè€Œæ˜¯å…·å¤‡"æ€è€ƒæ·±åº¦"çš„ç ”ç©¶åä½œä¼™ä¼´ã€‚

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Deep Research Pipeline                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Query        â”‚â”€â”€â”€>â”‚ Multi-Source â”‚â”€â”€â”€>â”‚ Content      â”‚              â”‚
â”‚  â”‚ Analyzer     â”‚    â”‚ Search       â”‚    â”‚ Extraction   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â”‚                   â”‚                   â”‚                       â”‚
â”‚         v                   v                   v                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Adaptive     â”‚    â”‚ Search       â”‚    â”‚ Progressive  â”‚              â”‚
â”‚  â”‚ Depth Config â”‚    â”‚ Cache        â”‚    â”‚ Summarizer   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â”‚                   â”‚                   â”‚                       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                             â”‚                                           â”‚
â”‚                             v                                           â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚                    â”‚ Credibility  â”‚                                     â”‚
â”‚                    â”‚ Scoring      â”‚                                     â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                             â”‚                                           â”‚
â”‚                             v                                           â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚                    â”‚ Failure      â”‚                                     â”‚
â”‚                    â”‚ Learning     â”‚                                     â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å…«å¤§æ ¸å¿ƒä¼˜åŒ–

### ä¼˜åŒ– 1: æŸ¥è¯¢ç›¸å…³æ€§æå– (Query-Relevant Extraction)

**é—®é¢˜**ï¼šä¼ ç»Ÿæ–¹å¼è¯»å–æ•´ä¸ªç½‘é¡µï¼Œæµªè´¹ 60-80% çš„ Token åœ¨æ— å…³å†…å®¹ä¸Šã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# backend/app/agent/tools/builtin/read_url.py
async def read_url(
    url: str,
    extract_relevant: bool = False,  # å¯ç”¨ç›¸å…³æ€§æå–
    query: str = None,               # ç”¨æˆ·æŸ¥è¯¢
    use_jina: bool = False           # Jina Reader API
)
```

**æŠ€æœ¯å®ç°**ï¼š
1. **Jina Reader API é›†æˆ**ï¼šå°†ç½‘é¡µè½¬æ¢ä¸ºå¹²å‡€çš„ Markdown æ ¼å¼
   - è‡ªåŠ¨ç§»é™¤å¹¿å‘Šã€å¯¼èˆªæ ã€é¡µè„šç­‰å™ªéŸ³
   - ä¿ç•™è¯­ä¹‰ç»“æ„ï¼ˆæ ‡é¢˜ã€åˆ—è¡¨ã€ä»£ç å—ï¼‰
   - API: `https://r.jina.ai/{url}`

2. **æŸ¥è¯¢ç›¸å…³æ€§è¿‡æ»¤**ï¼š
   - æ–‡æœ¬åˆ†å—ï¼ˆ500 å­—ç¬¦/å—ï¼Œ100 å­—ç¬¦é‡å ï¼‰
   - å…³é”®è¯åŒ¹é… + TF-IDF è¯„åˆ†
   - åªä¿ç•™ç›¸å…³æ€§ > é˜ˆå€¼çš„å—

**æ•ˆæœ**ï¼š
| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| å¹³å‡é¡µé¢ Token | 8,000 | 1,500 | **81% èŠ‚çœ** |
| ç›¸å…³å†…å®¹ä¿ç•™ç‡ | 100% | 95%+ | - |

---

### ä¼˜åŒ– 2: æ¸è¿›å¼æ‘˜è¦ (Progressive Summarization)

**é—®é¢˜**ï¼šè¯»å– 10+ æ¥æºåï¼ŒContext è†¨èƒ€å¯¼è‡´ Token çˆ†ç‚¸ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# backend/app/services/progressive_summarizer.py
class ProgressiveSummarizer:
    def __init__(
        self,
        batch_size: int = 3,              # æ¯ N ä¸ªæ¥æºè§¦å‘æ‘˜è¦
        summary_model: str = "claude-3-haiku",  # è½»é‡æ¨¡å‹
        storage_path: str = "./findings"   # åŸæ–‡æŒä¹…åŒ–
    )
```

**å·¥ä½œæµç¨‹**ï¼š
```
Source 1 â†’ Buffer
Source 2 â†’ Buffer  
Source 3 â†’ Buffer â”€â”€> æ‰¹é‡æ‘˜è¦ â”€â”€> æ‘˜è¦å…¥ Context
                               â””â”€â”€> åŸæ–‡å­˜ Filesystem

Source 4 â†’ Buffer
Source 5 â†’ Buffer
Source 6 â†’ Buffer â”€â”€> æ‰¹é‡æ‘˜è¦ â”€â”€> åˆå¹¶åˆ° Context
                               â””â”€â”€> åŸæ–‡å­˜ Filesystem
```

**æ•ˆæœ**ï¼š
- 10 æ¥æºåœºæ™¯ï¼š**70% Token èŠ‚çœ**ï¼ˆ40K â†’ 12Kï¼‰
- æ”¯æŒæŒ‰éœ€å›æº¯åŸæ–‡ï¼ˆæ–‡ä»¶ç³»ç»ŸæŒä¹…åŒ–ï¼‰

---

### ä¼˜åŒ– 3: æœç´¢ç¼“å­˜ä¸å»é‡ (Search Cache + Deduplication)

**é—®é¢˜**ï¼šç›¸ä¼¼æŸ¥è¯¢é‡å¤æœç´¢ï¼Œç›¸åŒ URL é‡å¤è¯»å–ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# backend/app/services/search_cache.py
class SearchCache:
    def __init__(
        self,
        max_size: int = 100,
        ttl_seconds: int = 3600,
        similarity_threshold: float = 0.8
    )
    
    def get_cached_or_search(
        self,
        query: str,
        search_func: Callable
    ) -> SearchResults:
        # 1. ç²¾ç¡®åŒ¹é…æ£€æŸ¥
        # 2. Jaccard è¯­ä¹‰ç›¸ä¼¼åº¦åŒ¹é…
        # 3. ç¼“å­˜æœªå‘½ä¸­åˆ™æ‰§è¡Œæœç´¢
```

**å»é‡ç­–ç•¥**ï¼š
1. **URL è§„èŒƒåŒ–**ï¼šç§»é™¤è¿½è¸ªå‚æ•°ã€ç»Ÿä¸€åè®®
2. **Jaccard ç›¸ä¼¼åº¦**ï¼šæŸ¥è¯¢åˆ†è¯åè®¡ç®—äº¤é›†/å¹¶é›†
3. **LRU æ·˜æ±°**ï¼šè¶…è¿‡å®¹é‡è‡ªåŠ¨æ¸…ç†æœ€æ—§ç¼“å­˜

**æ•ˆæœ**ï¼š
- ç›¸ä¼¼æŸ¥è¯¢å‘½ä¸­ç‡ï¼š**40-60%**
- API è°ƒç”¨èŠ‚çœï¼š**35%**

---

### ä¼˜åŒ– 4: å¤šæºæœç´¢è‡ªåŠ¨é™çº§ (Multi-Source Search Fallback)

**é—®é¢˜**ï¼šå•ä¸€æœç´¢æºçš„é™åˆ¶ï¼ˆé€Ÿç‡ã€è´¨é‡ã€å¯ç”¨æ€§ï¼‰ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# backend/app/agent/tools/builtin/search_providers.py
class MultiSourceSearchProvider:
    providers = [
        ("duckduckgo", DDGSearchProvider, Priority.HIGH),
        ("brave", BraveSearchProvider, Priority.MEDIUM),
        ("serper", SerperSearchProvider, Priority.LOW),
    ]
    
    async def search(self, query: str) -> List[SearchResult]:
        for name, provider, _ in self.providers:
            try:
                return await provider.search(query)
            except RateLimitError:
                continue  # è‡ªåŠ¨é™çº§åˆ°ä¸‹ä¸€ä¸ª
```

**é™çº§ç­–ç•¥**ï¼š
```
DuckDuckGo (å…è´¹/æ— é™)
    â†“ å¤±è´¥/é™é€Ÿ
Brave Search (å…è´¹é¢åº¦)
    â†“ å¤±è´¥/é™é€Ÿ
Serper/Google (ä»˜è´¹åå¤‡)
```

**æ•ˆæœ**ï¼š
- æœç´¢å¯ç”¨æ€§ï¼š**99.9%**
- æˆæœ¬ä¼˜åŒ–ï¼šä¼˜å…ˆä½¿ç”¨å…è´¹æº

---

### ä¼˜åŒ– 5: è‡ªé€‚åº”æ·±åº¦æ§åˆ¶ (Adaptive Depth Control)

**é—®é¢˜**ï¼šä¸åŒæŸ¥è¯¢éœ€è¦ä¸åŒçš„ç ”ç©¶æ·±åº¦ï¼Œå›ºå®šé…ç½®æµªè´¹èµ„æºã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# backend/app/services/query_analyzer.py
class QueryAnalyzer:
    def analyze(self, query: str) -> QueryProfile:
        return QueryProfile(
            query_type=self._detect_type(query),  # factual/analytical/comparative/exploratory/procedural
            complexity=self._calculate_complexity(query),
            recommended_depth=self._recommend_depth(),
            recommended_breadth=self._recommend_breadth()
        )
```

**æŸ¥è¯¢ç±»å‹çŸ©é˜µ**ï¼š
| ç±»å‹ | ç‰¹å¾ | æ¨èæ·±åº¦ | æ¨èå¹¿åº¦ |
|------|------|----------|----------|
| Factual | äº‹å®æ€§é—®é¢˜ | 1 | 3 |
| Analytical | éœ€è¦åˆ†ææ¨ç† | 3 | 5 |
| Comparative | å¤šæ–¹æ¯”è¾ƒ | 2 | 8 |
| Exploratory | å¼€æ”¾æ¢ç´¢ | 4 | 10 |
| Procedural | æ“ä½œæ­¥éª¤ | 2 | 4 |

**æ•ˆæœ**ï¼š
- ç®€å•æŸ¥è¯¢ï¼šToken æ¶ˆè€— **-50%**
- å¤æ‚æŸ¥è¯¢ï¼šç ”ç©¶è´¨é‡ **+30%**

---

### ä¼˜åŒ– 6: æµå¼ç»“æœè¿”å› (Streaming Results)

**é—®é¢˜**ï¼šç­‰å¾…æ‰€æœ‰æœç´¢å®Œæˆåæ‰è¿”å›ï¼Œé¦–ç»“æœå»¶è¿Ÿé«˜ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# backend/app/agent/agents/deep_research.py
async def batch_search_streaming(
    self,
    queries: List[str]
) -> AsyncGenerator[SearchResult, None]:
    tasks = [self._search_one(q) for q in queries]
    for coro in asyncio.as_completed(tasks):
        result = await coro
        yield result  # å®Œæˆä¸€ä¸ªç«‹å³è¿”å›
```

**æŠ€æœ¯ç»†èŠ‚**ï¼š
- `asyncio.as_completed()` å®ç°éé˜»å¡æµå¼
- å¹¶å‘ä¸Šé™ï¼š`MAX_CONCURRENT_TOOLS = 10`
- ä¿¡å·é‡æ§åˆ¶ï¼š`asyncio.Semaphore`

**æ•ˆæœ**ï¼š
| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| é¦–ç»“æœå»¶è¿Ÿ | 10s | 2s | **5x æ›´å¿«** |
| æ„ŸçŸ¥ä½“éªŒ | ç­‰å¾… | æ¸è¿›åŠ è½½ | æ˜¾è‘—æå‡ |

---

### ä¼˜åŒ– 7: å¯ä¿¡åº¦è¯„åˆ† (Credibility Scoring)

**é—®é¢˜**ï¼šä½è´¨é‡æ¥æºæ±¡æŸ“ç ”ç©¶ç»“æœã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# backend/app/services/credibility_scorer.py
class CredibilityScorer:
    def score(self, source: Source) -> CredibilityScore:
        return CredibilityScore(
            domain_authority=self._score_domain(source.domain),   # 0-40 åˆ†
            freshness=self._score_freshness(source.date),         # 0-20 åˆ†
            content_quality=self._score_content(source.text),     # 0-20 åˆ†
            source_type=self._score_type(source.type)             # 0-20 åˆ†
        )
```

**è¯„åˆ†ç»´åº¦**ï¼š

**1. Domain Authority (0-40)**
```python
domain_scores = {
    # æƒå¨æ¥æº
    "arxiv.org": 38,
    "nature.com": 40,
    "gov.cn": 35,
    "edu.cn": 33,
    
    # ä¸€èˆ¬æ¥æº
    "zhihu.com": 25,
    "medium.com": 22,
    
    # ä½è´¨é‡
    "unknown-blog.xyz": 10
}
```

**2. Freshness (0-20)**
- < 1 æœˆ: 20 åˆ†
- < 6 æœˆ: 15 åˆ†
- < 1 å¹´: 10 åˆ†
- > 1 å¹´: 5 åˆ†

**3. Content Quality (0-20)**
- å¼•ç”¨æ•°é‡
- ç»“æ„åŒ–ç¨‹åº¦
- ä¸“ä¸šæœ¯è¯­å¯†åº¦

**4. Source Type (0-20)**
- å­¦æœ¯è®ºæ–‡: 20
- å®˜æ–¹æ–‡æ¡£: 18
- æ–°é—»æŠ¥é“: 15
- åšå®¢: 10
- è®ºå›: 5

**æ•ˆæœ**ï¼š
- é«˜è´¨é‡æ¥æºå æ¯”ï¼š50% â†’ **80%**
- ç ”ç©¶ç»“è®ºå¯é æ€§ï¼šæ˜¾è‘—æå‡

---

### ä¼˜åŒ– 8: å¤±è´¥å­¦ä¹ æœºåˆ¶ (Failure Learning)

**é—®é¢˜**ï¼šé‡å¤è®¿é—®å¤±è´¥çš„åŸŸåï¼Œæµªè´¹æ—¶é—´å’Œèµ„æºã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# backend/app/services/failure_tracker.py
class FailureTracker:
    def __init__(
        self,
        failure_threshold: int = 3,      # N æ¬¡å¤±è´¥è§¦å‘é»‘åå•
        blacklist_duration: int = 3600   # é»‘åå•æŒç»­æ—¶é—´(ç§’)
    )
    
    def record_failure(
        self,
        domain: str,
        error_type: str,
        context: dict
    ):
        # è®°å½•å¤±è´¥æ¨¡å¼
        # è§¦å‘é˜ˆå€¼åˆ™åŠ å…¥é»‘åå•
        
    def suggest_query_rewrite(
        self,
        original_query: str,
        failure_patterns: List[FailurePattern]
    ) -> str:
        # åŸºäºå¤±è´¥æ¨¡å¼å»ºè®®æŸ¥è¯¢é‡å†™
```

**å­¦ä¹ ç­–ç•¥**ï¼š
1. **åŸŸåé»‘åå•**ï¼š3 æ¬¡å¤±è´¥ â†’ 1 å°æ—¶å†·å´æœŸ
2. **é”™è¯¯æ¨¡å¼è¯†åˆ«**ï¼š
   - 403 Forbidden â†’ å°è¯•æ›¿ä»£æ¥æº
   - Timeout â†’ é™ä½å¹¶å‘
   - Rate Limit â†’ åˆ‡æ¢æœç´¢æº
3. **æŸ¥è¯¢é‡å†™å»ºè®®**ï¼š
   - æœç´¢æ— ç»“æœ â†’ æ‰©å±•å…³é”®è¯
   - ç»“æœä¸ç›¸å…³ â†’ ç²¾ç‚¼æŸ¥è¯¢

**æ•ˆæœ**ï¼š
- æ— æ•ˆè¯·æ±‚å‡å°‘ï¼š**60%**
- ç ”ç©¶å®Œæˆç‡æå‡ï¼š**25%**

---

## ğŸ“Š æ€§èƒ½åŸºå‡†

### Token æ¶ˆè€—å¯¹æ¯”

| åœºæ™¯ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | èŠ‚çœ |
|------|--------|--------|------|
| å•é¡µé¢è¯»å– | 8,000 | 1,500 | 81% |
| 10 æ¥æºç ”ç©¶ | 80,000 | 15,000 | 81% |
| 20 æ¥æºæ·±åº¦ç ”ç©¶ | 160,000 | 25,000 | 84% |

### å»¶è¿Ÿå¯¹æ¯”

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| é¦–ç»“æœå»¶è¿Ÿ | 10s | 2s | 5x |
| 10 æ¥æºå®Œæˆ | 60s | 15s | 4x |
| å…¨æµç¨‹å®Œæˆ | 120s | 35s | 3.4x |

### è´¨é‡å¯¹æ¯”

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| é«˜è´¨é‡æ¥æºå æ¯” | 50% | 80% | +60% |
| ç ”ç©¶å®Œæˆç‡ | 75% | 95% | +27% |
| å¼•ç”¨å‡†ç¡®ç‡ | 80% | 95% | +19% |

---

## ğŸ”§ é…ç½®å‚æ•°

### ç¯å¢ƒå˜é‡

```bash
# æœç´¢é…ç½®
DEEP_RESEARCH_MAX_CONCURRENT=10          # æœ€å¤§å¹¶å‘æ•°
DEEP_RESEARCH_DEFAULT_DEPTH=2            # é»˜è®¤ç ”ç©¶æ·±åº¦
DEEP_RESEARCH_DEFAULT_BREADTH=5          # é»˜è®¤ç ”ç©¶å¹¿åº¦

# Jina Reader API
JINA_API_KEY=your_jina_api_key           # å¯é€‰ï¼Œæå‡è¯»å–è´¨é‡

# æœç´¢æº API Keys
BRAVE_API_KEY=your_brave_key             # Brave Search
SERPER_API_KEY=your_serper_key           # Serper/Google

# ç¼“å­˜é…ç½®
SEARCH_CACHE_SIZE=100                    # ç¼“å­˜æ¡ç›®æ•°
SEARCH_CACHE_TTL=3600                    # ç¼“å­˜è¿‡æœŸæ—¶é—´(ç§’)

# å¤±è´¥å­¦ä¹ 
FAILURE_THRESHOLD=3                      # é»‘åå•è§¦å‘é˜ˆå€¼
BLACKLIST_DURATION=3600                  # é»‘åå•æŒç»­æ—¶é—´(ç§’)
```

### ä»£ç é…ç½®

```python
# deep_research.py
class DeepResearchConfig:
    MAX_CONCURRENT_TOOLS = 10
    PROGRESSIVE_SUMMARY_BATCH = 3
    CREDIBILITY_THRESHOLD = 60
    CACHE_SIMILARITY_THRESHOLD = 0.8
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
backend/app/
â”œâ”€â”€ agent/
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â””â”€â”€ deep_research.py          # ä¸»æ§åˆ¶å™¨ + å¹¶å‘/æµå¼
â”‚   â””â”€â”€ tools/
â”‚       â””â”€â”€ builtin/
â”‚           â”œâ”€â”€ read_url.py           # Jina + ç›¸å…³æ€§æå–
â”‚           â””â”€â”€ search_providers.py   # å¤šæºæœç´¢é™çº§
â”‚
â””â”€â”€ services/
    â”œâ”€â”€ progressive_summarizer.py     # æ¸è¿›å¼æ‘˜è¦
    â”œâ”€â”€ search_cache.py               # æœç´¢ç¼“å­˜å»é‡
    â”œâ”€â”€ query_analyzer.py             # æŸ¥è¯¢åˆ†æ
    â”œâ”€â”€ credibility_scorer.py         # å¯ä¿¡åº¦è¯„åˆ†
    â””â”€â”€ failure_tracker.py            # å¤±è´¥å­¦ä¹ 
```

---

## ğŸ”® æœªæ¥è§„åˆ’

### v2.1 è®¡åˆ’
- [ ] å‘é‡è¯­ä¹‰ç¼“å­˜ï¼ˆæ›¿ä»£ Jaccardï¼‰
- [ ] å¤šè¯­è¨€æŸ¥è¯¢ä¼˜åŒ–
- [ ] å®æ—¶çƒ­ç‚¹è¿½è¸ª

### v2.2 è®¡åˆ’
- [ ] çŸ¥è¯†å›¾è°±é›†æˆ
- [ ] æ¥æºäº¤å‰éªŒè¯
- [ ] ç ”ç©¶æŠ¥å‘Šæ¨¡æ¿

### v3.0 è®¡åˆ’
- [ ] Agent åä½œç ”ç©¶
- [ ] é•¿æœŸè®°å¿†æ•´åˆ
- [ ] ä¸ªæ€§åŒ–ç ”ç©¶åå¥½

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Context Management](./Context-Management.md) - ä¸Šä¸‹æ–‡ç®¡ç†
- [Memory System](./Memory.md) - è®°å¿†ç³»ç»Ÿ
- [Tool Use](./Tool-Use.md) - å·¥å…·ä½¿ç”¨
- [Agent Runtime Design](../architecture/Agent-Runtime-Design.md) - Agent è¿è¡Œæ—¶è®¾è®¡

---

*æœ€åæ›´æ–°: 2026-01-17*
