# TokenDance 产品需求文档 (PRD)

> Version: 1.0.0 | MVP阶段
> Last Updated: 2026-01-08

## 1. 产品概述

### 1.1 产品定位

TokenDance 是一个**通用AI Agent平台**，融合了业界领先产品的核心优势：

- **Manus**：沙箱执行 + 计划背诵 + 双重分身
- **GenSpark**：深度研究 + 引用回溯 + Read-then-Summarize
- **AnyGen**：双系统验证 + 渐进式引导 + Human-in-the-Loop

### 1.2 产品愿景

让每个用户都拥有一个能自主完成复杂任务的AI助手，既能深度研究、分析信息，也能动手执行、生成交付物。

### 1.3 目标用户

| 用户类型 | 核心需求 | 使用场景 |
|---------|---------|---------|
| 知识工作者 | 高效研究、信息整合 | 市场调研、竞品分析、学术研究 |
| 产品/运营 | 快速产出PPT、报告 | 汇报材料、方案呈现 |
| 开发者 | 代码执行、数据处理 | 数据分析、自动化脚本 |
| 学生/研究者 | 文献调研、论文辅助 | 论文综述、资料整理 |

## 2. MVP功能范围

### 2.1 核心功能

#### 功能1：AI Deep Research（深度研究）

**用户故事**：
> 作为一名产品经理，我希望AI能帮我深度调研某个领域/竞品，自动搜索多个信息源，整合成结构化报告，并标注每个结论的来源，以便我快速了解市场情况。

**功能要点**：
- 多源并行搜索（支持自定义搜索深度）
- 智能信息聚合与去重
- 引用回溯系统（每个结论标注[1][2]来源）
- Read-then-Summarize（避免context爆炸）
- 支持导出Markdown/PDF报告

**验收标准**：
- [ ] 用户输入研究主题后，Agent自动拆解搜索query
- [ ] 至少聚合3个以上信息源
- [ ] 每个关键结论必须有引用标注
- [ ] 报告结构清晰、可导出

#### 功能2：AI PPT（智能演示文稿）

**用户故事**：
> 作为一名运营人员，我希望AI能根据我的主题/大纲，自动生成专业美观的PPT，我可以预览、调整后下载使用。

**功能要点**：
- 支持主题描述或大纲输入
- 智能内容生成与排版
- 多套模板风格可选
- 实时预览与编辑
- 导出PPTX/PDF格式

**验收标准**：
- [ ] 输入主题后5分钟内生成完整PPT
- [ ] 支持至少3种风格模板
- [ ] 生成的PPT可直接导出使用
- [ ] 支持单页重新生成/调整

### 2.2 基础能力

#### Workspace（工作空间）

- 每个用户拥有独立工作空间
- 支持多会话管理
- 历史记录保存与检索
- 文件/产出物管理

#### Sandbox（沙箱环境）

- 安全隔离的代码执行环境
- 支持Python及常用库
- 文件系统操作
- 网络受限访问

## 3. 产品设计原则

### 3.1 渐进式披露 (Progressive Disclosure)

**设计理念**：不一次性展示所有功能，根据用户意图逐步引导。

**实现方式**：

1. **结构化引导**
   ```
   用户："帮我做个PPT"
   Agent："好的，请告诉我：
          1. PPT的主题是什么？
          2. 大概需要多少页？
          3. 有偏好的风格吗？（商务/简约/创意）"
   ```

2. **意图确认**
   - 复杂任务开始前先确认理解
   - 关键决策点暂停等待用户确认

3. **分步展示结果**
   - 先展示大纲/框架
   - 用户确认后再生成详细内容

### 3.2 Human-in-the-Loop (HITL)

**高风险操作必须人工确认**：

| 操作类型 | 风险等级 | 处理方式 |
|---------|---------|---------|
| 信息搜索 | 低 | 自动执行 |
| 内容生成 | 低 | 自动执行 |
| 文件创建 | 中 | 展示预览后确认 |
| 代码执行 | 中 | 展示代码后确认 |
| 外部API调用 | 高 | 必须明确授权 |
| 发送邮件/消息 | 高 | 必须明确授权 |
| 删除/修改文件 | 高 | 必须明确授权 |

**确认UI设计**：
- 清晰展示即将执行的操作
- 明确的"确认/取消"按钮
- 支持查看详情（如完整代码）

### 3.3 透明可追溯

- Agent每一步操作对用户可见
- 思考过程可展开查看
- 工具调用日志透明
- 结论来源可回溯

## 4. 用户旅程

### 4.1 Deep Research 旅程

```
1. 用户输入研究主题
   ↓
2. Agent确认研究范围和深度
   ↓
3. Agent展示搜索计划（可调整）
   ↓
4. 实时展示搜索进度
   ↓
5. 展示信息聚合过程
   ↓
6. 生成结构化报告（带引用）
   ↓
7. 用户预览/调整/导出
```

### 4.2 AI PPT 旅程

```
1. 用户输入PPT主题/需求
   ↓
2. Agent引导补充信息（页数、风格等）
   ↓
3. 生成大纲，用户确认/调整
   ↓
4. 逐页生成内容，实时预览
   ↓
5. 用户可单页重新生成
   ↓
6. 选择模板风格
   ↓
7. 导出PPTX/PDF
```

## 5. 信息架构

### 5.1 主导航结构

```
TokenDance
├── 首页/对话
│   ├── 新对话
│   └── 历史会话列表
├── 工作空间
│   ├── 文件管理
│   └── 产出物管理
├── Skills（技能市场）[未来]
└── 设置
    ├── 账户
    ├── 偏好
    └── API配置
```

### 5.2 对话界面结构

```
┌─────────────────────────────────────────────┐
│ 侧边栏        │        主对话区             │
│               │                             │
│ [新对话]      │  [消息列表]                 │
│               │    - 用户消息               │
│ 历史会话       │    - Agent回复              │
│  - 会话1      │      - 思考过程（可折叠）    │
│  - 会话2      │      - 工具调用（可展开）    │
│  - ...        │      - 结果展示              │
│               │                             │
│               │  ─────────────────────────  │
│               │  [输入框] [发送]            │
└─────────────────────────────────────────────┘
```

## 6. 非功能需求

### 6.1 性能要求

| 指标 | 目标值 |
|-----|-------|
| 首次响应时间 | < 2秒 |
| 搜索结果返回 | < 10秒 |
| PPT生成（10页） | < 3分钟 |
| 深度研究报告 | < 5分钟 |

### 6.2 可用性要求

- 响应式设计，支持桌面/平板
- 支持深色/浅色主题
- 支持会话中断恢复
- 清晰的错误提示和重试机制

### 6.3 安全要求

- 用户数据隔离
- API Key加密存储
- 沙箱执行隔离
- 敏感信息过滤

## 7. 成功指标

### MVP阶段KPI

| 指标 | 目标 |
|-----|-----|
| Deep Research完成率 | > 85% |
| PPT生成满意度 | > 80% |
| 平均任务完成时间 | 较手工减少50% |
| 用户留存（周活） | > 40% |

## 8. 里程碑

| 阶段 | 时间 | 交付物 |
|-----|-----|-------|
| Phase 1 | Week 1-2 | 基础框架、对话界面 |
| Phase 2 | Week 3-4 | Agent引擎、Skill系统 |
| Phase 3 | Week 5-6 | Deep Research功能 |
| Phase 4 | Week 7-8 | AI PPT功能 |
| Phase 5 | Week 9-10 | 集成测试、上线 |

## 9. 风险与应对

| 风险 | 影响 | 应对措施 |
|-----|-----|---------|
| LLM成本过高 | 商业可行性 | Skill三级加载、context压缩 |
| 生成质量不稳定 | 用户体验 | 双系统验证、模板约束 |
| 搜索结果质量差 | 研究可信度 | 来源可信度评分、多源验证 |
| 沙箱安全漏洞 | 系统安全 | Docker隔离、资源限制 |

## 附录

### A. 竞品参考

- Manus: manus.im
- GenSpark: genspark.ai
- AnyGen: anygen.io
- Perplexity: perplexity.ai

### B. 相关文档

- [UI设计文档](../design/UI-Design.md)
- [技术架构HLD](../architecture/HLD.md)
- [技术架构LLD](../architecture/LLD.md)
- [Skill专项设计](../modules/Skill-Design.md)
- [Memory专项设计](../modules/Memory-Design.md)
- [Sandbox专项设计](../modules/Sandbox-Design.md)
