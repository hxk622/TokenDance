# TokenDance 产品需求文档 (PRD)

> Version: 2.0.0 | Vibe-Agentic Workflow  
> Last Updated: 2026-01-14

## 1. 产品概述

### 1.1 产品定位

TokenDance 是一个**人机共生的终极创作场**，将顶级 Agent 的原子能力通过 Vibe Workflow 进行重组和升华：

- **Manus 的执行大脑**：全自动任务链 + 计划背诵 + 沙箱执行
- **Coworker 的执行双手**：本地文件深度操控 + 外科手术式修改
- **Vibe Workflow 的生命气息**：情感价值 + 直觉交互 + 氛围感体验

我们不是在构建另一个 Agent 工具，而是在创造一个让"Claude Code"这种硬核能力真正服务于全世界（**For the rest of the world**）的平台。

### 1.2 产品愿景与使命

**愿景**：成为人机共生的"第一操作系统"  
让顶级 Agent（Manus 的执行力 + Coworker 的本地深度）在极具氛围感的环境中与人类意志无缝同频。

**使命**：将复杂的 Agent 智力，转化为丝滑的创作愉悦感  
通过 Vibe-Agentic Workflow，把技术复杂度封装为"所思即所得"的直觉化体验。

> 详见 [VisionAndMission.md](./VisionAndMission.md)

### 1.3 目标用户（三层演进）

#### Phase 1: 技术创作者（早期核心用户）

| 用户类型 | 核心需求 | 使用场景 |
|---------|---------|---------|
| 独立开发者 | 本地项目深度操控 + 自动化 | 代码审查、重构、文档生成 |
| 技术作家 | 从代码到文章的自动转换 | 技术博客、教程编写 |
| 开源贡献者 | 多项目协作、任务自动化 | PR 分析、Issue 处理 |

#### Phase 2: 知识工作者（扩展用户）

| 用户类型 | 核心需求 | 使用场景 |
|---------|---------|---------|
| 研究员/咨询顾问 | 深度研究 + 结构化报告 | 市场调研、竞品分析 |
| 产品/运营 | 快速产出 PPT、方案 | 汇报材料、方案呈现 |
| 内容创作者 | 信息聚合 + 知识图谱 | 文献综述、资料整理 |

#### Phase 3: 企业团队（商业化方向）

| 用户类型 | 核心需求 | 使用场景 |
|---------|---------|---------|
| 产品团队 | 需求文档自动化 | PRD 生成、用户故事提取 |
| 营销团队 | 竞品分析 + 内容生成 | 行业报告、营销方案 |
| 客户成功 | 会议记录 + 行动项 | 客户沟通、需求跟踪 |

## 2. MVP功能范围（基于三位一体架构）

### 2.1 核心功能

#### 功能1：AI Deep Research（Manus 主导 + Coworker 辅助）

**用户故事**：
> 作为一名产品经理，我希望拖入一个竞品分析的主题文件夹，AI 自动搜索多个信息源、整合成结构化报告，并自动保存到我的本地 Workspace，每个结论都有来源标注，整个过程丝滑优雅。

**功能要点**（Vibe-Agentic Workflow 实现）：
- **Manus 执行**：多源并行搜索 + 智能信息聚合 + 引用回溯系统
- **浏览器与爬取**：通过 agent-browser + web_search/read_url 实现自动打开网页、元素点击、内容抓取与截图（用于 Deep Research 时光长廊）
- **Coworker 辅助**：自动保存到本地 Workspace + 创建 Markdown + 更新项目索引
- **Vibe UI**：实时进度美学 + 拖拽式交互 + 执行时间线可视化
- Read-then-Summarize（三文件工作法：task_plan → findings → progress）
- 一键导出 Markdown/PDF

**验收标准**：
- [ ] 用户输入研究主题后，Agent自动拆解搜索query
- [ ] 至少聚合3个以上信息源（包含浏览器自动化采集的数据）
- [ ] 每个关键结论必须有引用标注
- [ ] 报告结构清晰、可导出

#### 功能2：AI PPT Generation（Manus 主导 + Vibe 增强）

**用户故事**：
> 作为一名运营人员，我希望拖入一个研究报告，点击"生成 PPT"，AI 自动生成专业美观的 PPT，我可以实时预览、通过直觉式交互调整，然后一键下载。整个过程像在指挥一支交响乐团。

**功能要点**（Vibe-Agentic Workflow 实现）：
- **Manus 执行**：从文档/笔记提取结构 + 智能内容生成与排版
- **Vibe UI**：拖拽上传 + 意图卡片选择 + 实时预览动画 + 单页调整微交互
- 多套模板风格（商务/简约/创意）+ 美学打磨
- 导出 PPTX/PDF + 支持 Coworker 保存到本地

**验收标准**：
- [ ] 输入主题后5分钟内生成完整PPT
- [ ] 支持至少3种风格模板
- [ ] 生成的PPT可直接导出使用
- [ ] 支持单页重新生成/调整

#### 功能3：科学计算能力包（Scientific Skills Pack）

**背景**：项目已集成 K-Dense Claude Scientific Skills 中的 100+ 科学计算与科研工作流 Skill（见 `docs/skills/scientific-catalog.md`），包括数值计算、符号计算、统计建模、生物信息、物理仿真等。

**用户故事**：
> 作为一名科研工作者/数据科学家，我希望在同一个工作台里既能做 Deep Research，又能直接调用各类科学计算 Skill（如 SymPy、Bayesian 推断、地理空间分析等），并通过沙箱安全执行代码。

**功能要点**：
- Skill Registry 自动加载 100+ 科学计算技能（Scientific Skills Pack）
- 通过 Sandbox + 终端脚本执行环境安全运行代码（Python 为主）
- 科学计算结果可直接写入 Workspace 文件（笔记、报告、可视化）
- 与 Deep Research/PPT Generation 联动（研究→建模→可视化→汇报）

**验收标准**：
- [ ] Skill Registry 中成功加载并可调用 100+ 科学相关 Skill
- [ ] 支持在 Sandbox 内执行基础科学计算示例（符号计算、统计推断等）
- [ ] 计算结果可被 Deep Research / PPT Agent 读取并引用

#### 功能4：AI 图像生成（Nano Banana 集成）

**用户故事**：
> 作为一名需要做演示汇报的用户，我希望在同一个工作流里一键生成封面图、示意图或科学插图，而不需要额外打开设计工具。

**功能要点**：
- 通过 Nano Banana 模型（或兼容接口）进行 AI 生图
- 提供少量预置模板（如汇报封面、节日海报、科研流程图背景）
- 支持从 Deep Research 结论/PPT 大纲中自动生成提示词
- 生成图片写入对象存储（MinIO），并在前端可直接预览/插入

**验收标准**：
- [ ] 至少支持 3 类常见图像场景（封面、插图、示意图）
- [ ] 单次生成在可接受延迟内完成（< 20 秒为目标）
- [ ] 生成图片可在 PPT 预览/报告预览中直接复用

### 2.2 基础能力（三位一体支撑）

#### Workspace（工作空间 - Coworker 基因）

- 每个用户拥有独立本地工作空间（沙盒隔离）
- **文件系统实时索引**（类似 Spotlight）
- 支持拖拽、右键菜单快捷操作
- 历史记录保存与检索（Context Graph 记录）
- 文件/产出物管理（向量化 + 图数据库）

#### Sandbox（沙箱环境 - 安全第一）

- 虚拟机隔离（参考 Anthropic Cowork 方案）
- 支持 Python 及常用库（Manus 执行）
- 本地文件系统操作（Coworker 深度）
- 操作可审计（Context Graph）
- 网络受限访问 + 敏感文件保护

#### 工具与集成（MCP / Skill / Browser / 终端脚本）

- **MCP 支持**：通过 MCP Manager 与多种 MCP Server 集成（Google Drive、GitHub、Slack、Notion 等），统一对外工具/资源接口
- **Skill 系统**：支持基于 YAML/Markdown 的 Skill 定义与三级加载（L1 元数据、L2 指令、L3 资源）
- **浏览器操作**：集成 agent-browser（及 Playwright 兜底），支持 browser_open/browser_click/browser_screenshot 等工具，用于 Deep Research 网页采集和时光长廊截图
- **终端脚本执行**：通过 Sandbox 内的终端执行器运行脚本（如 Python、Shell），用于自动化数据处理与科研工作流编排
- **数据爬取与搜索**：结合 web_search/read_url/agent-browser 以及科学技能中的检索能力，实现从网页到结构化数据的爬取与搜索

#### Agent 协作中枢（路由决策层）

- **智能路由**：根据任务类型分配 Manus/Coworker
- **并发执行**：长任务（Manus）+ 短任务（Coworker）异步协同
- **状态同步**：实时进度可视化 + Working Memory 展示
- **降级方案**：Agent 失败时的兜底策略

## 3. 产品设计原则

### 3.0 核心理念: Vibe-Agentic Workflow

**定义**:

Vibe-Agentic Workflow = **Manus（执行大脑）** + **Coworker（执行双手）** + **Vibe Workflow（生命气息）**

这是一种将顶级 Agent 的原子能力通过情绪价值和**认知流（Flow）**进行重组的设计范式。它主张：Agent 工具不仅要解决"功能性需求"，更要创造一种顺滑、优雅且充满激励感的"使用环境"，让用户在操作过程中获得心理上的愉悦与审美上的满足。

> 完整理念详见 [VisionAndMission.md - Vibe-Agentic Workflow](./VisionAndMission.md#vibe-agentic-workflow)

**三大支柱 (The Three Pillars)**:

#### 1. 直觉重于指令 (Intuition over Instruction)

**理念**： 最好的操作是不需要思考的。减少复杂的菜单层级，通过暗示（Cues）和自然的交互逻辑引导用户。

**落地**： 追求"手感"。就像实体乐器一样，反馈要即时且符合预期，让用户进入一种"无意识"的创作状态。

#### 2. 情感共鸣与审美张力 (Emotional Resonance & Aesthetic Logic)

**理念**： 美学本身就是生产力。视觉的精致、动效的细腻、音效的质感，这些不是装饰，而是为了构建一个让用户愿意长时间停留的"数字空间"。

**落地**： 拒绝冰冷的工业感，引入更多的人文关怀。设计要有呼吸感，界面要根据用户的状态进行动态反馈。

#### 3. 极低摩擦力的"流" (Frictionless Flow)

**理念**： 任何微小的卡顿或逻辑断层都会破坏"Vibe"。工作流应该是流动的，而非跳跃的。

**落地**： 消除转换成本（Context Switching）。通过无缝的衔接、智能的预判，让用户从一个任务进入下一个任务时，感受不到边界。

**Vibe Workflow 的核心价值对比**:

| 维度 | 传统工具 (Tool-centric) | Vibe Workflow (Experience-centric) |
|------|---------------------------|----------------------------------|
| 目标 | 完成任务 (Task Completion) | 享受过程 (Process Enjoyment) |
| 反馈 | 报错或成功 (Binary Feedback) | 情感激励与节奏感 (Rhythmic Feedback) |
| 用户状态 | 被动、疲劳 (Passive/Tired) | 主动、沉浸 (Proactive/Immersed) |
| 产品门槛 | 需要学习手册 (Manual Required) | 依赖直觉与探索 (Discovery-based) |

**我们的宣言**:

> "我们不只是在制造锤子，我们是在构建一个激发灵感的工坊。我们相信，当工具的'Vibe'对了，创造力就会自然涌现。"

---

### 3.1 渐进式披露 (Progressive Disclosure)

**设计理念**：不一次性展示所有功能，根据用户意图逐步引导。

**实现方式**：

1. **结构化引导**
   ```
   用户："帮我做个PPT"
   Agent："好的，请告诉我：
          1. PPT的主题是什么？
          2. 大概需要多少页？
          3. 有偏好的风格吗？（商务/简约/创意）"
   ```

2. **意图确认**
   - 复杂任务开始前先确认理解
   - 关键决策点暂停等待用户确认

3. **分步展示结果**
   - 先展示大纲/框架
   - 用户确认后再生成详细内容

### 3.2 Human-in-the-Loop (HITL)

**高风险操作必须人工确认**：

| 操作类型 | 风险等级 | 处理方式 |
|---------|---------|---------|
| 信息搜索 | 低 | 自动执行 |
| 内容生成 | 低 | 自动执行 |
| 文件创建 | 中 | 展示预览后确认 |
| 代码执行 | 中 | 展示代码后确认 |
| 外部API调用 | 高 | 必须明确授权 |
| 发送邮件/消息 | 高 | 必须明确授权 |
| 删除/修改文件 | 高 | 必须明确授权 |

**确认UI设计**：
- 清晰展示即将执行的操作
- 明确的"确认/取消"按钮
- 支持查看详情（如完整代码）

### 3.3 透明可追溯

- Agent每一步操作对用户可见
- 思考过程可展开查看
- 工具调用日志透明
- 结论来源可回溯

## 4. 用户旅程

### 4.1 Deep Research 旅程

```
1. 用户输入研究主题
   ↓
2. Agent确认研究范围和深度
   ↓
3. Agent展示搜索计划（可调整）
   ↓
4. 实时展示搜索进度
   ↓
5. 展示信息聚合过程
   ↓
6. 生成结构化报告（带引用）
   ↓
7. 用户预览/调整/导出
```

### 4.2 AI PPT 旅程

```
1. 用户输入PPT主题/需求
   ↓
2. Agent引导补充信息（页数、风格等）
   ↓
3. 生成大纲，用户确认/调整
   ↓
4. 逐页生成内容，实时预览
   ↓
5. 用户可单页重新生成
   ↓
6. 选择模板风格
   ↓
7. 导出PPTX/PDF
```

## 5. 信息架构

### 5.1 主导航结构

```
TokenDance
├── 首页/对话
│   ├── 新对话
│   └── 历史会话列表
├── 工作空间
│   ├── 文件管理
│   └── 产出物管理
├── Skills（技能市场）[未来]
└── 设置
    ├── 账户
    ├── 偏好
    └── API配置
```

### 5.2 对话界面结构

```
┌─────────────────────────────────────────────┐
│ 侧边栏        │        主对话区             │
│               │                             │
│ [新对话]      │  [消息列表]                 │
│               │    - 用户消息               │
│ 历史会话       │    - Agent回复              │
│  - 会话1      │      - 思考过程（可折叠）    │
│  - 会话2      │      - 工具调用（可展开）    │
│  - ...        │      - 结果展示              │
│               │                             │
│               │  ─────────────────────────  │
│               │  [输入框] [发送]            │
└─────────────────────────────────────────────┘
```

## 6. 非功能需求

### 6.1 性能要求

| 指标 | 目标值 |
|-----|-------|
| 首次响应时间 | < 2秒 |
| 搜索结果返回 | < 10秒 |
| PPT生成（10页） | < 3分钟 |
| 深度研究报告 | < 5分钟 |

### 6.2 可用性要求

- 响应式设计，支持桌面/平板
- 支持深色/浅色主题
- 支持会话中断恢复
- 清晰的错误提示和重试机制

### 6.3 安全要求

- 用户数据隔离
- API Key加密存储
- 沙箱执行隔离
- 敏感信息过滤

## 7. 成功指标

### MVP阶段KPI

| 指标 | 目标 |
|-----|-----|
| Deep Research完成率 | > 85% |
| PPT生成满意度 | > 80% |
| 平均任务完成时间 | 较手工减少50% |
| 用户留存（周活） | > 40% |

## 8. 里程碑

| 阶段 | 时间 | 交付物 |
|-----|-----|-------|
| Phase 1 | Week 1-2 | 基础框架、对话界面 |
| Phase 2 | Week 3-4 | Agent引擎、Skill系统 |
| Phase 3 | Week 5-6 | Deep Research功能 |
| Phase 4 | Week 7-8 | AI PPT功能 |
| Phase 5 | Week 9-10 | 集成测试、上线 |

## 9. 风险与应对

| 风险 | 影响 | 应对措施 |
|-----|-----|---------|
| LLM成本过高 | 商业可行性 | Skill三级加载、context压缩 |
| 生成质量不稳定 | 用户体验 | 双系统验证、模板约束 |
| 搜索结果质量差 | 研究可信度 | 来源可信度评分、多源验证 |
| 沙箱安全漏洞 | 系统安全 | Docker隔离、资源限制 |

## 附录

### A. 竞品参考

- Manus: manus.im
- GenSpark: genspark.ai
- AnyGen: anygen.io
- Perplexity: perplexity.ai

### B. 相关文档

- [UI设计文档](../design/UI-Design.md)
- [技术架构HLD](../architecture/HLD.md)
- [技术架构LLD](../architecture/LLD.md)
- [Skill专项设计](../modules/Skill-Design.md)
- [Memory专项设计](../modules/Memory-Design.md)
- [Sandbox专项设计](../modules/Sandbox-Design.md)
